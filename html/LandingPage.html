<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            text-align: center;
            margin: 50px;
            background-color: #8ac1b1;
        }
        h1, h3, p, label, input {
            margin-bottom: 20px;
        }
        .landing-page {
            display: block;
        }
    </style>
</head>
<body>
    <div class="landing-page">
        <h1>WORD GAME</h1>
        <img src="https://media.giphy.com/media/3o7aCTXVcHJgJ4yoeI/giphy.gif" alt="Pirate">
        <h3>Type your Name to Enter the Lobby</h3>
        <form id="nameForm">
            <label for="playerName">First Name:</label><br>
            <input type="text" id="playerName" name="playerName" required><br>
            <input type="submit" value="Join">
        </form>
    </div>
    
    <script>
        document.getElementById('nameForm').addEventListener('submit', function(event) {
            event.preventDefault();
            var playerName = document.getElementById("playerName").value;

            // Optional: Store the name in localStorage or sessionStorage
            sessionStorage.setItem('playerName', playerName);

            // Establish WebSocket connection
            const serverUrl = `ws://${window.location.hostname}:9880`;
            const connection = new WebSocket(serverUrl);

            connection.onopen = function() {
                console.log("Connection open ...");
                // Send data in a structured format if needed, like JSON
                connection.send(JSON.stringify({type: 'newPlayer', name: playerName}));
            };

            connection.onerror = function(error) {
                console.error("WebSocket error observed:", error);
            };

            connection.onclose = function() {
                console.log("Connection closed.");
            };

            // Redirect to lobby after establishing connection
            setTimeout(function() { 
                window.location.href = "Lobby.html"; 
            }, 1000); // Redirect after 1 second
        });
    </script>
</body>
</html>
